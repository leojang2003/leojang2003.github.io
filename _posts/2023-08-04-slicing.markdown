---
layout: post
title: Slicing
subtitle: 
tags: []
comments: true
---

一個 slice 指的是一個 list 元素的子集合，以 list 來說，slice 會是連續的，slice 的語法如下，從 start 開始，到 stop 前一個( stop 沒有包含)，step 指的是一次走幾格，預設是 1。start/stop/step 3 個值都可以是選填的。

```python
my_list[start:stop:step=1]
```

值得注意的是，slice 的索引，也可是負值的。一般的 slice 的方向是左到右的。

```python

方向      → → → → → → → → → → → → → → → →

正的索引   0    1    2    3    4    5    6 
          ↓    ↓    ↓    ↓    ↓    ↓    ↓  
        ['a', 'b', 'c', 'd', 'e', 'f', 'g']
          ↑    ↑    ↑    ↑    ↑    ↑    ↑
負的索引  -7   -6   -5   -4   -3   -2   -1 

```

<br/>

### 索引是正數的 

開始結束都在索引範圍內。

```python
a = ['a', 'b', 'c', 'd', 'e', 'f', 'g']

a[0:2] 
# ['a', 'b']
```

結束超出範圍時，不管超出多少都一樣。

```python
a[3:10] 
# ['d', 'e', 'f', 'g']

a[3:100] 
# ['d', 'e', 'f', 'g']
```

因為結束的索引不包含，所以索引開始=結束時回傳空集合。

```python
a[6:6] 
# []
```

如果開始索引 > 結束索引，會回傳空集合，因為預設是向右走的，所以結束索引不可以小於開始索引。step 如果設成負值的話就是另外一回事，下面會講。

```python
a[4:3] 
# []
```

<br/>

### 空的 start 或 stop

開始沒有值時等同從序列最左開始，結束沒有值時等同到序列最右結束。

```python
a[:5] 
# ['a', 'b', 'c', 'd']

a[4:] 
# ['e', 'f', 'g']

a[:] 
# ['a', 'b', 'c', 'd', 'e', 'f', 'g']
```

<br/>

### 索引是負數的

```python

方向      → → → → → → → → → → → → → → → →

        ['a', 'b', 'c', 'd', 'e', 'f', 'g']
          ↑    ↑    ↑    ↑    ↑    ↑    ↑
負的索引  -7   -6   -5   -4   -3   -2   -1 

```

負數的索引，開始結束都在範圍內，同樣的，開始的索引必須比結束的索引小。

```python
a[-3:-1] 
# ['e', 'f']
```

開始的索引比結束的索引大，回傳空集合。

```python
a[-2:-3] 
# []
```

因為 stop 的索引不包含，所以以下是空集合。

```python
a[-2:-2] 
# []
```

負數索引也一樣，開始沒有值時等同從序列最左開始，結束沒有值時等同到序列最右結束。

```python
a[:-4] 
# ['a', 'b', 'c']

a[-4:] 
# ['d', 'e', 'f', 'g']
```
<br/>

### 同時有正負索引

如果開始索引在序列的位置 > 結束索引在序列的位置，會回傳空集合，注意這裡a[-4:4]是有值的，因為索引 -4 是在右邊數來第四個位置，索引 4 是右邊數來第三個，所以這樣做是可以的。不過我想正常應該是不會這麼寫。

```python
a[-4:0] # []
a[-4:1] # []
a[-4:2] # []
a[-4:3] # []
a[-4:4] # ['d'] 
```

<br/>

### 設定一次走幾格的 step 

預設的 step 是 1，也就是向右一次走一格。

```python
a = [0,1,2,3,4,5,6,7,8,9]

# 設定1等同預設
a[1:6:1]
# [1,2,3,4,5]
```

step 設 2 結果如下。

```python
a = [0,1,2,3,4,5,6,7,8,9]

# 一次走2格
a[1:6:1]
# [1,3,5]
```

### 負的 step


step 設 -1 等同 reverse，一次向左走 1 格。方向變成右到左了。

```python
正的索引   0    1    2    3    4    5    6    7    8    9
          ↓    ↓    ↓    ↓    ↓    ↓    ↓    ↓    ↓    ↓
          ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ←  
        [ 0,   1,   2,   3,   4,   5,   6,   7,   8,   9]
          ↑    ↑    ↑    ↑    ↑    ↑    ↑    ↑    ↑    ↑
負的索引 -10   -9   -8   -7   -6   -5   -4   -3   -2   -1 
```

簡單例子

```python
a = [0,1,2,3,4,5,6,7,8,9]

a[::-1]
# [9,8,7,6,5,43,2,1,0]
```

step 設負值等同換成由右到左探訪，所以開始結束的位置需要對調。

```python
# 錯誤，索引1沒辦法向左走到索引6
a[1:6:-1]
# []

# 索引 6 可以向左走到索引 1
a[6:1:-1]
# [6,5,4,3,2]
```

同樣如果索引是負值的話，

```python
a = [0,1,2,3,4,5,6,7,8,9]

# 錯誤，索引-8沒辦法向左走到索引-4
a[-8:-4:-1]
# []

# 索引 -4 可以向左走到索引 -8
a[-4:-8:-1]
# [6,5,4,3,2]
```


<br/>
<br/>
<br/>
